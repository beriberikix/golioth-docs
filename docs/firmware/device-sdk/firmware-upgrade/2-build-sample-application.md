---
title: Build Sample Application
sidebar_position: 2
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';



The next steps will vary slightly based on the target hardware. The final command line arguement in the build commands is the directory in which the sample project lives.  This specification will depend upon where the command was executed from in the terminal.  The project is located in <ProjectRoot\>/modules/lib/golioth/samples/dfu.  Golioth has tested the following three targets:

<Tabs
groupId="targets"
defaultValue="nrf9160-feather"
values=
{[
  {label: 'nRF9160 Feather', value: 'nrf9160-feather'},
  {label: 'nRF9160 DK', value: 'nrf9160-dk'},
  {label: 'nRF52840 DK + ESP32-WROOM-32', value: 'esp-32'},
]}>

<TabItem value="nrf9160-feather">
Build the sample application:

```west build -b circuitdojo_feather_nrf9160_ns samples/dfu```

See mcumgr guide for mcumgr installation.
Enter bootloader and use mcumgr to flash firmware:

```mcumgr --conntype serial --connstring /dev/ttyUSB,baudrate=1000000 build/zephyr/app_update.bin```

Next the application will be built a second time. The parameter -DCONFIG_MCUBOOT_IMAGE_VERSION will be used to alter the version number assigned to the firmware and will ultimately serve to trigger a firmware download.

```west build -p -b circuitdojo_feather_nrf9160_ns samples/dfu -- -DCONFIG_MCUBOOT_IMAGE_VERSION=\"1.2.3\"```

Follow Over-The-Air (OTA) Updates guide using goliothctl to turn the update binary generated by the previous command into an artifact which can be consumed by the Golioth Cloud.  The binary can be found at build/zephyr/app_update.bin. Complete that guide to activate a release campaign featuring the update firmware.

Terminal output is viewable over UART at 115200 baud. After the device establishes an active connection with the Golioth Cloud, it will begin a firmware update download if the version of the firmware release candidate is different from that currently flashed to the device.
</TabItem>

<TabItem value="nrf9160-dk">
Build the sample application:

```west build -b nrf9160dk_nrf9160_ns samples/dfu```

Flash the firmware with the following command:

```west flash```

Next the application will be built a second time. The parameter -DCONFIG_MCUBOOT_IMAGE_VERSION will be used to alter the version number assigned to the firmware and will ultimately serve to trigger a firmware download.

```west build -p -b nrf9160dk_nrf9160_ns samples/dfu -- -DCONFIG_MCUBOOT_IMAGE_VERSION=\"1.2.3\"```

Follow Over-The-Air (OTA) Updates guide using goliothctl to turn the update binary generated by the previous command into an artifact which can be consumed by the Golioth Cloud.  The binary can be found at build/zephyr/app_update.bin. Complete that guide to activate a release campaign featuring the update firmware.

Terminal output is viewable over UART at 115200 baud. After the device establishes an active connection with the Golioth Cloud, it will begin a firmware update download if the version of the firmware release candidate is different from that currently flashed to the device.

</TabItem>

<TabItem value="esp-32">
<ComingSoon/>
</TabItem>

</Tabs>

--- 



